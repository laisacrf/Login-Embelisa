@model IEnumerable<login_e_cadastro.Models.ClienteInadimplente>

@{
    Layout = "_LayoutDashboard";
    ViewData["Title"] = "Relat√≥rio de Inadimpl√™ncia";
}

<section class="inadimplencia-relatorio">
    <h1>Relat√≥rio de Inadimpl√™ncia</h1>

    <a asp-controller="Conta" asp-action="Index" class="voltar-btn">‚¨ÖÔ∏è Voltar para Contas</a>

    <h2>Adicionar Novo Cliente</h2>
    <form asp-action="AdicionarCliente" method="post">
        <label>Nome do Cliente:</label>
        <input type="text" name="Nome" required />

        <label>Data de Vencimento:</label>
        <input type="date" name="Vencimento" required />

        <label>Valor (R$):</label>
        <input type="number" name="Valor" min="0" step="0.01" required />

        <label>Dias em Atraso:</label>
        <input type="number" name="Atraso" min="0" required />

        <label>Status:</label>
        <select name="Status">
            <option value="Em cobran√ßa">Em cobran√ßa</option>
            <option value="Sem contato">Sem contato</option>
            <option value="Negocia√ß√£o">Negocia√ß√£o</option>
            <option value="Encaminhado ao jur√≠dico">Encaminhado ao jur√≠dico</option>
        </select>

        <button type="submit">Adicionar Cliente</button>
    </form>

    <table id="tabela">
        <thead>
            <tr>
                <th>Cliente</th>
                <th>Vencimento</th>
                <th>Valor (R$)</th>
                <th>Dias em Atraso</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var c in Model)
            {
                <tr>
                    <td>@c.Nome</td>
                    <td>@c.Vencimento.ToString("dd/MM/yyyy")</td>
                    <td>@c.Valor.ToString("F2")</td>
                    <td>@c.Atraso</td>
                    <td>@c.Status</td>
                </tr>
            }
        </tbody>
        <tfoot>
            <tr>
                <td colspan="2">Totais</td>
                <td>@Model.Sum(c => c.Valor).ToString("F2")</td>
                <td colspan="2">@Model.Count() clientes</td>
            </tr>
        </tfoot>
    </table>

    <div class="resumo">
        <h3>Resumo Geral</h3>
        <p><strong>Total de clientes inadimplentes:</strong> @Model.Count()</p>
        <p><strong>Valor total em aberto:</strong> R$ @Model.Sum(c => c.Valor).ToString("F2")</p>
        <button onclick="window.print()">üñ®Ô∏è Imprimir Relat√≥rio</button>
    </div>
</section>
